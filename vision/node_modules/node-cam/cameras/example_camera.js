var http = require('http');
var querystring = require('querystring');
var fs = require('fs');
var mkdirp = require('mkdirp');

module.exports = function camera(config, cb){
	var camera = {};
	config = config || {};
	camera.settings = {
		name:	'',
		host:	'',
		port:	-1,
		user:	'',
		pass:	''
	}
	if('directories' in config){
		camera.settings.directories = {};
		for(key in config.directories){
			mkdirp(config.directories[key], function (err) {
			    if (err){

			    }
			    else {
			    	camera.settings.directories[key] = config.directories[key];
			    }
			});
		}
	}
	for( var key in config ) {
		camera.settings[key] = config[key];
	}
	if( typeof cb == 'function' ) {
		cb(settings);
	}

	//Exposed functions
	camera.snapshot = function(filepath, cb){
		//Add code here
		snapshot(filepath, cb);
	};

	return camera;
}

/*******************************************************************
*************************** cam-specific ***************************
********************************************************************/
snapshot = function(cb){
	cb({success:false,message:'not implemented'});
}
